<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Audio Player</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div class="upper-class"> <div><img src="player.png"> <h1>Music player</h1></div>
    <img src="menu.png"> </div>
    <div class="outer_class">
        <div class="player">
            <div class="img-clas">
                <img src="music.png" class="box-img">
                <h2 id="songName">Default</h2> 
            </div>
            <div class="play-range-class">
                <input type="range" name="" min="0" value="0" id="seekSlider">
            </div>
            <div class="control">
                <button onclick="repeatChange()"><img src="r1.png" id="repeat"></button>
                <button onclick="preSong()"><img src="pre.png" id="pre-img"></button>
                <button onclick="togglePlayPause()"><img src="play2.png" class="play" id="image"></button>
                <button onclick="nextSong()"><img src="next.png"></button>
                <button onclick="toggleLike()"><img src="l.png" id="like"></button>
            </div>
            <audio id="playerControl">
                <source src="0.mp3" type="audio/mpeg" id="sourceSong">
                </audio>
                <div class="Volume-class">
                    <div class="Volume-class-inner">
                        <button onclick ="changeVolume()" id="volumeControl"> 
                          <img src="v.png" id="volumeImage">
                      </button>
                      <input type="range" id="volume" name="volume" min="0" max="1" step="0.01" value="1" onchange="ChangeVolume(this.value)">
                  </div>
                  <div class="auto-play-class">
                    <button onclick="autoplayButoon()"><img src="autoplay.png" id="auto_play_image">
                    </button>
                </div>
            </div>
        </div>
        <div class="player-list">
            <h1 class="PlayListHead">Playlist</h1>
            <button onclick="changeCurrentSonf(0)"> <img src="n.png"><h1>Nesamaguren</h1></button>
            <button  onclick="changeCurrentSonf(1)"> <img src="n.png"><h1>Naanum Rowdy Dhaan</h1></button>
            <button  onclick="changeCurrentSonf(2)"> <img src="n.png"><h1>Ice Katti Kuruvi</h1></button>
            <button onclick="changeCurrentSonf(3)">  <img src="n.png"><h1>Kadhale Kadhale</h1></button>
            <button onclick="changeCurrentSonf(4)"> <img src="n.png"><h1>Oxygen</h1></button>
            <button onclick="changeCurrentSonf(5)"> <img src="n.png"><h1>Yaar Azhaippadhu</h1></button>
            <button onclick="changeCurrentSonf(6)" >  <img src="n.png"><h1>Yaen Ennai Pirindhaai</h1></button>
            <button onclick="changeCurrentSonf(7)"> <img src="n.png"><h1>Yennai Maatrum Kadhale</h1></button>
            <button onclick="changeCurrentSonf(8)"> <img src="n.png"><h1>Pirai Thedum</h1></button>
            <button onclick="changeCurrentSonf(9)"> <img src="n.png"><h1>Po Urave</h1></button>
            <button onclick="changeCurrentSonf(10)"> <img src="n.png"><h1>Naan Un</h1></button>
            <button onclick="changeCurrentSonf(11)"> <img src="n.png"><h1>Venmathiye</h1></button>
            <button onclick="changeCurrentSonf(12)"> <img src="n.png"><h1>Thean Kudika</h1></button>
            <button onclick="changeCurrentSonf(13)"> <img src="n.png"><h1>Yaanji</h1></button>
            <button onclick="changeCurrentSonf(14)"> <img src="n.png"><h1>Maruvaarthai</h1></button>
            <button onclick="changeCurrentSonf(15)"> <img src="n.png"><h1>Kadhaippoma</h1></button>
            <button onclick="changeCurrentSonf(16)"> <img src="n.png"><h1>Uyire Un Uyirena</h1></button>
            <button onclick="changeCurrentSonf(17)"> <img src="n.png"><h1>Kannamma</h1></button>
            <button onclick="changeCurrentSonf(18)"> <img src="n.png"><h1>Oh Oh (From "Thangamagan")</h1></button>
            <button onclick="changeCurrentSonf(19)"> <img src="n.png"><h1>Hey Penne</h1></button>
            <button onclick="changeCurrentSonf(20)"> <img src="n.png"><h1>Railin Oligal</h1></button>
            <button onclick="changeCurrentSonf(21)"> <img src="n.png"><h1>Nee Kavithaigala</h1></button>
            <button onclick="changeCurrentSonf(22)"> <img src="n.png"><h1>Kangal Edho</h1></button>


        </div>
    </div>

    <script>
        var imageElement = document.getElementById('image');
        var audioPlayer = document.getElementById('playerControl');
        var box = document.querySelector('.box-img');
        var songSource = document.getElementById('sourceSong');
        var unlike = false;
        var repeat = false;
        var songNameElement = document.getElementById('songName'); // corrected variable name
        box.style.animationPlayState = 'paused';
        var currentVolume = 0;
        var likeElement = document.getElementById('like');
        var autoplaySong = document.getElementById('auto_play_image');
        var autoplay = false;
        const songs = ['0.mp3', '1.mp3', '2.mp3', '3.mp3', '4.mp3', '5.mp3', '6.mp3', '7.mp3','8.mp3','9.mp3','10.mp3','11.mp3','12.mp3','13.mp3','14.mp3','15.mp3','16.mp3','17.mp3','18.mp3','19.mp3','20.mp3','21.mp3','22.mp3'];
        const songsName = ['Nesamaguren', 'Naanum Rowdy Dhaan', 'Ice Katti Kuruvi', 'Kadhale Kadhale', 'Oxygen', 'Yaar Azhaippadhu', 'Yaen Ennai Pirindhaai', 'Yennai Maatrum Kadhale','Pirai Thedum','Po Urave','Naan Un','Venmathiye','Thean Kudika','Yaanji','Maruvaarthai','Kadhaippoma','Uyire Un Uyirena','Kannamma','Oh Oh (From "Thangamagan")','Hey Penne','Railin Oligal','Nee Kavithaigala','Kangal Edho'];
        var likeCount = [false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false];
        var songIndex = 0; // renamed to songIndex for clarity

        // Function to toggle play/pause and update UI
        function togglePlayPause() {
            if (audioPlayer.paused) {
                playAudio();
            } else {
                pauseAudio();
            }
        }

        // Function to play audio
        function playAudio() {
            audioPlayer.play();
            imageElement.src = 'pause1.png';
            box.style.animationPlayState = 'running';
            updateSongName();
        }

        // Function to pause audio
        function pauseAudio() {
            audioPlayer.pause();
            imageElement.src = 'play2.png';
            box.style.animationPlayState = 'paused';
        }

        // Function to toggle like button
        function toggleLike() {   
            if (!unlike) {
                likeElement.src = 'l1.png';
                unlike = true;
                likeCount[songIndex]= true;
            } else {
                likeElement.src = 'l.png';
                unlike = false;
                likeCount[songIndex]= false;

            }
        }

        // Function to toggle repeat button
        function repeatChange() {
            var repeatElement = document.getElementById('repeat');
            if (!repeat) {
                repeatElement.src = 'r2.png';
                repeat = true;
            } else {
                repeatElement.src = 'r1.png';
                repeat = false;
            }
        }

        // Function to play next song
        function nextSong() {
            if (songIndex < songs.length - 1) {
                songIndex++;
            } else {
                songIndex = 0; // Loop back to the first song
            }
            loadAndPlaySong();
            if(likeCount[songIndex] == true){
                likeCounter();
            }
            else{
             unlike = true;
             toggleLike();
         }
     }

        // Function to play previous song
     function preSong() {
        if (songIndex > 0) {
            songIndex--;
        } else {
                songIndex = songs.length - 1; // Wrap around to the last song
            }
            loadAndPlaySong();
            if(likeCount[songIndex] == true){
                likeCounter();
            }
            else{
             unlike = true;
             toggleLike();
         }}

        // Function to load and play the current song
         function loadAndPlaySong() {
            songSource.src = songs[songIndex];
            audioPlayer.load();
            playAudio();
            updateSongName();
            likeCounter(songIndex);

        }

        // Function to update the displayed song name
        function updateSongName() {
            songNameElement.textContent = songsName[songIndex];
        }

        // Event listener for when metadata is loaded
        audioPlayer.addEventListener('loadedmetadata', function() {
            seekSlider.max = audioPlayer.duration;
        });

        // Event listener for time update
        audioPlayer.addEventListener('timeupdate', function() {
            seekSlider.value = audioPlayer.currentTime;
            checkEndOfTrack();
        });

        // Event listener for seek slider input
        seekSlider.addEventListener('input', function() {
            audioPlayer.currentTime = seekSlider.value;
            checkEndOfTrack();
        });

        // Function to check end of track
        function checkEndOfTrack() {
            if (audioPlayer.currentTime >= audioPlayer.duration) {
                pauseAudio();
                if(autoplay == true){
                    if(repeat == true){
                        alert("Trun off the Repeat");
                    }
                     else{
                        nextSong();

                    }
                }
                else{
                    if(repeat == true){

                        playAudio();
                    }
                } 

            }
        }
        function ChangeVolume(val)
        {    if(defaultVolume)
        {
            audioPlayer.volume = 0;
        }
        else{
            audioPlayer.volume = val;
        }
    }

    function changeVolume(){
        var muteVolume = document.getElementById('volumeImage');
        if(!defaultVolume)
            { muteVolume.src ='m.png';
        defaultVolume = true;
        audioPlayer.volume = 0;
    }
    else{ 
        muteVolume.src = 'v.png';
        defaultVolume = false;
        audioPlayer.volume = 1;

    }
}
function changeCurrentSonf(valu){
    songSource.src = songs[valu];
    songIndex = valu;
    audioPlayer.load();
    playAudio();
    updateSongName();
    if(likeCount[songIndex] == true){
        likeCounter();
    }
    else{
     unlike = true;
     toggleLike();
 }
}
function likeCounter() {
    if(likeCount[songIndex] == true){
     likeElement.src = 'l1.png';}
 }
 function autoplayButoon(){
    if(!autoplay){
        autoplaySong.src = 'toggle.png';
        autoplay = true;
    }
    else{
        autoplaySong.src = 'autoplay.png';
        autoplay = false;
    }

}
</script>
</body>
</html>
